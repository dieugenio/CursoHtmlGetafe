<!doctype html>
<!-- Ejercicio basado en un ejemplo de Cali Rojas http://www.lewebmonster.com">www.lewebmonster.com -->
<html lang="es">
	<head>
		<meta charset="utf-8">
		<title>Animaci√≥n de una isla flotante</title>
		<style type="text/css">
			body{
				background: linear-gradient(lightblue, white) fixed;
			}
			div{
				width: 1000px;
				height: 400px;
				border: 1px solid gray;
					background-color: linear(lightblue, cyan);
					background-image: url(images/nubes.png);
					border-radius: 30px;
					box-shadow:0 0 25px gray;
					text-align: center;
					margin: auto;
			}
		</style>
		<script src="jquery.js"></script>
		<script>
			var nubeLeft = 0;
			var islaTop = 50;
			$(function() {
				$('div').css({backgroundImage: "url(images/nubes.png)"});
				$('div').mouseenter(function() {
					nubeLeft=parseFloat($('div').css('background-position-x'));
					islaTop=parseFloat($('img').css('margin-top'));
					$('*').stop(true);
				});
				$('div').mouseleave(function() {
					rotarNubes();
					moverIsla();
				});
				rotarNubes();
				moverIsla();
			});
			function rotarNubes() {
				var velocity=2000;
				if(nubeLeft==0){
					$('div').animate({backgroundPosition: 0}, 0);
					$('div').animate({backgroundPosition: 800}, 2500, 'linear', rotarNubes);
				} else {
					velocity=2000/800*(800-nubeLeft);
					$('div').animate({backgroundPosition: nubeLeft
}, 0);
					$('div').animate({backgroundPosition: 800}, velocity, 'linear', rotarNubes);
					nubeLeft=0;
				}
			}
			function moverIsla() {
				$('img').animate({marginTop: 50}, 1500);
				$('img').animate({marginTop: 0}, 1500, moverIsla);
			}
		</script>
	</head>
	<body>
		<div>
			<img src="images/flotante.png"/>
		</div>
	</body>
</html>
